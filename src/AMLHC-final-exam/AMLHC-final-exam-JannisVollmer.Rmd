---
title: "Modul 12 - Finale Prüfungsleistung - Jannis Vollmer - MMI23"
output: html_notebook
---

```{r}
# placeholder for needed libraries
```


# 1 Einleitung
tbd

# 2 Datensatz
Der originale Datensatz wurde ursprünglich von der University of Michigan erstellt. Diese Arbeit untersucht ein Subset des eigentlichen, originalen Datensatzes. Die Daten wurden erfasst, um relevante Einblicke in die Gesundheit von Patientinnen und Patienten über 50 Jahren, sowie das Gesundheitssystem in den Vereinigten Staaten von Amerika zu untersuchen. Dabei werden verschiedenste Kategorien, wie z.B. Versicherungsstatus, Schlafstörungen oder Medikation betrachtet.

Jede Zeile im Datensatz repräsentiert einen Umfrageteilnehmer. Insgesamt gibt es 714. Der Datensatz enthält sensible Daten, darunter Informationen zu Rasse/Ethnizität, Geschlecht und Alter. Für die Untermenge des ursprünglichen NPHA-Datensatzes wurden 14 Merkmale ausgewählt, die sich auf Gesundheit und Schlaf beziehen, um eine Vorhersageaufgabe zu ermöglichen. Alle Umfrageteilnehmer mit fehlenden Antworten auf eines der ausgewählten Merkmale wurden entfernt, sodass der Datensatz keine fehlenden Werte enthält.

## 2.1 Feature-Beschreibung
Es gibt insgesamt 14 Features, die alle katgorische Werte enthalten. 

### 2.1.1 Target-Feature
Das Target-Feature in dieser Arbeit ist "Number_of_Doctors_Visited" und enthält die Anzahl der verschiedenen Ärzte, die ein Patient bzw. eine Patientin in einem Jahr gesehen hat:
1: 0-1 Ärzte
2: 2-3 Ärzte
3: 4 oder mehr Ärzte

Fehlende Werte gibt es nicht.

### 2.1.2 Andere Features
Es gibt 13 weitere Features im Datensatz, die zur Untersuchung herangezogen werden können. Die folgende Tabelle zeigt die Definition der Werte

| Kategorie                              | Wert | Beschreibung                        |
|----------------------------------------|------|-------------------------------------|
| **Age**                              | 1    | 50-64                               |
|                                        | 2    | 65-80                               |
| **Physical_Health**             | -1   | Abgelehnt                           |
|                                        | 1    | Ausgezeichnet                       |
|                                        | 2    | Sehr gut                            |
|                                        | 3    | Gut                                 |
|                                        | 4    | Befriedigend                        |
|                                        | 5    | Schlecht                            |
| **Mental_Health**                | -1   | Abgelehnt                           |
|                                        | 1    | Ausgezeichnet                       |
|                                        | 2    | Sehr gut                            |
|                                        | 3    | Gut                                 |
|                                        | 4    | Befriedigend                        |
|                                        | 5    | Schlecht                            |
| **Dental_Health**                     | -1   | Abgelehnt                           |
|                                        | 1    | Ausgezeichnet                       |
|                                        | 2    | Sehr gut                            |
|                                        | 3    | Gut                                 |
|                                        | 4    | Befriedigend                        |
|                                        | 5    | Schlecht                            |
| **Employment**                      | -1   | Abgelehnt                           |
|                                        | 1    | Vollzeit beschäftigt                |
|                                        | 2    | Teilzeit beschäftigt                |
|                                        | 3    | Im Ruhestand                        |
|                                        | 4    | Zurzeit nicht beschäftigt           |
| **Stress_Keeps_Patient_from_Sleeping**         | 0    | Nein                                |
|                                        | 1    | Ja                                  |
| **Medication_Keeps_Patient_from_Sleeping**    | 0    | Nein                                |
|                                        | 1    | Ja                                  |
| **Pain_Keeps_Patient_from_Sleeping**      | 0    | Nein                                |
|                                        | 1    | Ja                                  |
| **Bathroom_Needs_Keeps_Patient_from_Sleeping** | 0    | Nein                                |
|                                        | 1    | Ja                                  |
| **Uknown_Keeps_Patient_from_Sleeping** | 0 | Nein                                |
|                                        | 1    | Ja                                  |
| **Trouble_Sleeping**                     | 0    | Nein                                |
|                                        | 1    | Ja                                  |
| **Prescription_Sleep_Medication**         | -1   | Abgelehnt                           |
|                                        | 1    | Regelmäßige Nutzung                 |
|                                        | 2    | Gelegentliche Nutzung               |
|                                        | 3    | Keine Nutzung                       |
| **Race**                              | -2   | Nicht gefragt                       |
|                                        | -1   | Abgelehnt                           |
|                                        | 1    | Weiß, nicht-hispanisch              |
|                                        | 2    | Schwarz, nicht-hispanisch           |
|                                        | 3    | Andere, nicht-hispanisch            |
|                                        | 4    | Hispanisch                          |
|                                        | 5    | Zwei oder mehr Rassen, nicht-hispanisch |
| **Gender**                         | -2   | Nicht gefragt                       |
|                                        | -1   | Abgelehnt                           |
|                                        | 1    | Männlich                            |
|                                        | 2    | Weiblich                            |

Keiner dieser Features hat fehlende Werte. Diese wurden bereits im Vorwege entfernt.

# 3 Forschungsfrage
Der vorliegende Datensatz sowie die darin beschriebenen Features sollen dazu genutzt werden, folgende Forschungsfrage zu beantworten: Ist es möglich, die Anzahl der Arztbesuche pro Jahr anhand der anderen Features vorherzusagen? 

Dabei wird untersucht, ob Variablen wie Gesundheit, Schlafqualität, Zahnpflege, verschreibungspflichtige Medikamente, Krankenversicherung und weitere relevante Faktoren dazu beitragen können, die Häufigkeit der Arztbesuche einer Person im Verlauf eines Jahres vorherzusagen. Ziel dieser Untersuchung ist es, ein besseres Verständnis dafür zu gewinnen, wie verschiedene gesundheitliche und soziodemografische Faktoren miteinander verknüpft sind und wie sie die Inanspruchnahme medizinischer Dienstleistungen beeinflussen.

# 3 Beantwortung und Diskussion der Forschungsfrage
## 3.1 Preprocessing

Im folgenden soll der Datensatz mit Hilfe von Preprocessing Methoden für die Analyse vorbereitet werden. Dafür müssen zunächst die Daten eingelesen werden:
```{r}
# Datensatz einlesen
npha_original <- read.csv("../data sets/NPHA-doctor-visits.csv")
```

Um einen Überblick über den Datensatz zu erhalten, kann man sich mit Hilfe verschiedener R-Funktionen Ausgaben erzeugen lassen
```{r}
# Erste Zeilen des Datensatzes
head(npha_original)

# Zusammenfassung
summary(npha_original)
```
Da keine Werte im Datensatz fehlen, müssen weder Zeilen gelöscht als auch keine Werte durch einen Mittelwert o.ä. ersetzt werden.

Im nächsten Schritt werden die kategorischen Variablen gemäß der Zuordnung aus Kapitel 2.1.2 faktorisiert.
```{r}
# Umwandlung der kategorischen Variablen in Faktoren
npha_original$Number.of.Doctors.Visited <- factor(npha_original$Number.of.Doctors.Visited, levels = c(1, 2, 3), labels = ("0-1 Ärzte", "2-3 Ärzte", "4 oder mehr Ärzte"))
npha_original$Age <- factor(npha_original$Age, levels = c(1, 2), labels = c("50-64", "65-80"))
npha_original$Phyiscal.Health <- factor(npha_original$Phyiscal.Health, levels = c(-1, 1, 2, 3, 4, 5), labels = c("Abgelehnt", "Ausgezeichnet", "Sehr gut", "Gut", "Befriedigend", "Schlecht"))
npha_original$Mental.Health <- factor(npha_original$Mental.Health, levels = c(-1, 1, 2, 3, 4, 5), labels = c("Abgelehnt", "Ausgezeichnet", "Sehr gut", "Gut", "Befriedigend", "Schlecht"))
npha_original$Dental.Health <- factor(npha_original$Dental.Health, levels = c(-1, 1, 2, 3, 4, 5), labels = c("Abgelehnt", "Ausgezeichnet", "Sehr gut", "Gut", "Befriedigend", "Schlecht"))
npha_original$Employment <- factor(npha_original$Employment, levels = c(-1, 1, 2, 3, 4), labels = c("Abgelehnt", "Vollzeit beschäftigt", "Teilzeit beschäftigt", "Im Ruhestand", "Zurzeit nicht beschäftigt"))
npha_original$Stress.Keeps.Patient.from.Sleeping <- factor(npha_original$Stress.Keeps.Patient.from.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Medication.Keeps.Patient.from.Sleeping <- factor(npha_original$Medication.Keeps.Patient.from.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Pain.Keeps.Patient.from.Sleeping <- factor(npha_original$Pain.Keeps.Patient.from.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Bathroom.Needs.Keeps.Patient.from.Sleeping <- factor(npha_original$Bathroom.Needs.Keeps.Patient.from.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Uknown.Keeps.Patient.from.Sleeping <- factor(npha_original$Uknown.Keeps.Patient.from.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Trouble.Sleeping <- factor(npha_original$Trouble.Sleeping, levels = c(0, 1), labels = c("Nein", "Ja"))
npha_original$Prescription.Sleep.Medication <- factor(npha_original$Prescription.Sleep.Medication, levels = c(-1, 1, 2, 3), labels = c("Abgelehnt", "Regelmäßige Nutzung", "Gelegentliche Nutzung", "Keine Nutzung"))
npha_original$Race <- factor(npha_original$Race, levels = c(-2, -1, 1, 2, 3, 4, 5), labels = c("Nicht gefragt", "Abgelehnt", "Weiß, nicht-hispanisch", "Schwarz, nicht-hispanisch", "Andere, nicht-hispanisch", "Hispanisch", "Zwei oder mehr Rassen, nicht-hispanisch"))
npha_original$Gender <- factor(npha_original$Gender, levels = c(-2, -1, 1, 2), labels = c("Nicht gefragt", "Abgelehnt", "Männlich", "Weiblich"))
```

### Zusammenfassung
Da im Datensatz keine Werte gefehlt haben, mussten keine Zeilen entfernt oder überarbeitet werden. Jedoch wurde im Preprocessing jede kategorische Variable faktorisiert, um die Daten lesbarer und verständlicher zu machen.

## Supervised Learning
### Random Forest

```{r}
#testcodechunk
```

# Ergebnisse
## Visualisierungen


# Quellen
[1] Datensatz "National Poll on Healthy Aging": University of Michigan, United States, abrufbar unter https://archive.ics.uci.edu/dataset/936/national+poll+on+healthy+aging+(npha), zuletzt abgerufen am 20.06.2024.